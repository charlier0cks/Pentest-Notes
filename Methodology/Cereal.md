202401131130
Status: #idea
Tags: [[Labs]],[[htb]]

# Cereal
IP: 10.10.10.217


## Recon

Ports Open:

```
PORT    STATE SERVICE
22/tcp  open  ssh
80/tcp  open  http
443/tcp open  https
```

Full Scan:

```
PORT    STATE SERVICE  VERSION
22/tcp  open  ssh      OpenSSH for_Windows_7.7 (protocol 2.0)
| ssh-hostkey: 
|   2048 08:8e:fe:04:8c:ad:6f:df:88:c7:f3:9a:c5:da:6d:ac (RSA)
|   256 fb:f5:7b:a1:68:07:c0:7b:73:d2:ad:33:df:0a:fc:ac (ECDSA)
|_  256 cc:0e:70:ec:33:42:59:78:31:c0:4e:c2:a5:c9:0e:1e (ED25519)

80/tcp  open  http     Microsoft IIS httpd 10.0
|_http-server-header: Microsoft-IIS/10.0
|_http-title: Did not follow redirect to https://10.10.10.217/

443/tcp open  ssl/http Microsoft IIS httpd 10.0
|_http-server-header: Microsoft-IIS/10.0
| ssl-cert: Subject: commonName=cereal.htb
| Subject Alternative Name: DNS:cereal.htb, DNS:source.cereal.htb
| Not valid before: 2020-11-11T19:57:18
|_Not valid after:  2040-11-11T20:07:19
|_ssl-date: 2024-01-13T16:38:46+00:00; 0s from scanner time.
| tls-alpn: 
|_  http/1.1
|_http-title: Cereal
Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows
```

Discoveries:

- Ports 80 redirects to https (443)
- Nmap shows domain -> cereal.htb
- Nmap shows subdomain -> source.cereal.htb
- Nmap shows SSH version -> For Windows 7.7
- Nmap shows Microsoft IIS version -> 10.0

Mapped domain/subdomains to box IP:

1.  `sudo vim /etc/hosts`
2. `Assign domains to IP -> "10.10.10.217 cereal.htb source.cereal.htb"`

WebApp Discoveries:

- Once again, http redirects to https
- cereal.htb/login  -> login portal landing page
- Javascript framework -> React
- Javascript libraries -> core-js 2.6.10

Source Subdomain Discoveries:

- Lots of disclosure in '/'
- Microsoft (R) Visual C# Compiler version 4.7.3190.0
- Path to main page in source subdomain -> c:/inetpub/source/default.aspx
- Microsoft .NET Framework Version:4.0.30319
- ASP.NET Version:4.7.3690.0
- Error prompt:

```
# Server Error in '/' Application.

---

## _Compilation Error_

**Description:** An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.  
  
**Compiler Error Message:** CS1519: Invalid token '>' in class, struct, or interface member declaration  
  
**Source Error:**  
  


Line 1:  <% @Page Language="C#" %> 
Line 2:   
Line 3:  <script runat="server">> 
Line 4:   
Line 5:
```


















<img src="https://github.com/charlier0cks/Pentest-Notes/blob/main/Attachments/wreath_poc.png">

---
# References
